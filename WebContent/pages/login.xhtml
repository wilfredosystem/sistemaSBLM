<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<link href="resources/css/estilo.css" rel="stylesheet" type="text/css" />
	<!-- para aceso normal -->
	<link href="../resources/css/estilo.css" rel="stylesheet"
		type="text/css" />
	<!-- para aceso despues de entrar a la paina restringida -->
	<script type="text/javascript">
		function handleLoginRequest(xhr, status, args) {

			if (args.validationFailed || !args.loggedIn) {

			} else {  
				window.location = "/sistemaSBLM/pages/pgNotificaciones.jsf"
			}
		}
	</script>

	<title>SBLM</title>
</h:head>
<h:body>

	<h:form>
	<p:growl id="messages" showDetail="true" sticky="false" life="3000" />
		<div id="contenedor">
			<div class="contenidoLogin">
				<div class="login01"></div>
				<div class="login02">
					<p:inputText id="idUser" value="#{usuarioMB.nombreusr}"
						style="margin-left: 50px; width: 217px;    height: 51px;box-shadow: 0px 1px 1px #ffc600; border-style: none;color:white; border-width: 0; background-color: #ffc600" />
				</div>
				<div class="login03"></div>
				<div class="login04">
					<p:password id="idPass" value="#{usuarioMB.contrasenausr}"
						onblur="disable"
						style="margin-left: 50px; width: 217px; box-shadow: 0px 1px 1px #ffc600;margin-top:1px; border-color:#ffc600;  height: 51px; color:white;  background-color: #ffc600" />
				</div>
				<div class="login05"></div>

				<div class="login06_1">
					<p:commandButton id="registroUsuario" value="Entrar"
						actionListener="#{usuarioMB.loguear}" image="entrar"
						oncomplete="handleLoginRequest(xhr, status, args)"
						update="messages"
						stylex="  margin-top:3px; box-shadow: 0px 1px 1px #ffc600; ">
					
					</p:commandButton>

				</div>
				<div class="login06_4">

					<p:commandLink id="nonAjax" onclick="dlgRecuperar.show()"
						style="margin-right:20px;" ajax="true">
						<h:outputText value="¿Olvido su contrase&ntilde;a?" />
					</p:commandLink>

				</div>

			</div>
			<div class="login07"></div>
		</div>
	</h:form>


	<!-- 	FORMULARIO RECUPERAR CONTRASENHA -->
	<h:form id="frmRecPass">
	<p:growl id="msjPass" showDetail="true" sticky="false" life="3000"  />
		<p:dialog id="idDlgRecuperar" header="RECUPERAR CONTRASE&Ntilde;A"
			widgetVar="dlgRecuperar" modal="true" fixedCenter="true"
			resizable="false">

			
			<h:panelGrid id="pgRecuperar" cellpadding="4">

				<p:row>
					<p:column>
						<h:outputText
							value="Favor ingresar su email y su contraseña le será enviada inmediatamente" />
						<p:separator id="separadorRecuperar1" />
					</p:column>
				</p:row>

				<p:row>
					<p:column>
						<h:outputText value="Email:" />
					</p:column>
					<p:column>
						<p:inputText value="#{usuarioMB.usuario.emailusr}"
							style="width: 200px" />
					</p:column>
				</p:row>
				<p:row>
					<p:column>
						<p:separator id="separadorRecuperar2" />
						<p:commandButton value="&nbsp;Enviar"
							actionListener="#{usuarioMB.recuperarContrasenha}"
							onclick="dlgRecuperar.hide()" update=":frmRecPass"
							image="icon-guardar" title="guardar" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<p:commandButton value="&nbsp;Cancelar"
							oncomplete="dlgRecuperar.hide()" image="icon-cancelar"
							title="cancelar" />
					</p:column>
				</p:row>


			</h:panelGrid>
		</p:dialog>
	</h:form>

</h:body>
</html>